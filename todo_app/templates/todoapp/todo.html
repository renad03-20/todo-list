{% extends 'todoapp/base.html' %}

{% block title %}Your Todo List - Todo App{% endblock %}

{% block content %}
    <div class="header">
        <h1 class="title">Your Todo List</h1>
        <p class="subtitle">Stay organized and productive</p>
    </div>
    
    <form action="#" method="POST">
        {% csrf_token %}
        <div class="input-group">
            <input class="nameoftask" type="text" name="task" placeholder="Enter a task" required>
            <input class="submit-btn" type="submit" value="+">
        </div>
    </form>
    
    <div class="task-list">
        <h3>Your Tasks:</h3>
        <ul id="task-list">
            {% for task in tasks %}
                <li data-id="{{ task.id }}" class="task-item">
                    <span class="checkbox">{% if task.completed %}✔️{% else %}☐{% endif %}</span>
                    <span class="task-text {% if task.completed %}completed{% endif %}">
                        {{ task.task }}
                    </span>
                    <span class="delete-btn">✖️</span>
                </li>
            {% empty %}
                <li>No tasks yet. Add one above to get started!</li>
            {% endfor %}
        </ul>
    </div>
    <div class="logout-container">
        <a href="{% url 'logout' %}" class="logout-link">Logout</a>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    // Pass Django URLs to JavaScript
    window.toggleCompleteUrl = "{% url 'toggle_complete_ajax' %}";
    window.deleteTaskUrl = "{% url 'delete_task_ajax' %}";
    window.csrfToken = "{{ csrf_token }}";
</script>
{% endblock %}